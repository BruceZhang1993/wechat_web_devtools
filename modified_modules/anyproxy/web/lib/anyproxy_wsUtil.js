"use strict";function anyproxy_wsUtil(o){function t(){n.bodyCbMap={},e=new WebSocket("ws://"+r+":"+a),e.onmessage=function(t){o.onGetData&&o.onGetData.call(n,t.data);try{var e=JSON.parse(t.data),r=e.type,a=e.content,y=e.reqRef}catch(i){o.onError&&o.onError.call(n,new Error("failed to parse socket data - "+i.toString()))}"update"==r?o.onGetUpdate&&o.onGetUpdate.call(n,a):"body"==r&&(o.onGetBody&&o.onGetBody.call(n,a,y),e.reqRef&&n.bodyCbMap[y]&&n.bodyCbMap[y].call(n,a))},e.onopen=function(t){o.onOpen&&o.onOpen.call(n,t)},e.onclose=function(t){o.onClose&&o.onClose.call(n,t)},e.onerror=function(t){o.onError&&o.onError.call(n,t)},n.dataSocket=e}if(o=o||{},!WebSocket)throw new Error("webSocket is not available on this browser");var e,n=this,r=o.baseUrl||"127.0.0.1",a=o.port||8003;t()}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol?"symbol":typeof o};anyproxy_wsUtil.prototype.send=function(o){"object"==("undefined"==typeof o?"undefined":_typeof(o))&&(o=JSON.stringify(o)),this.dataSocket.send(o)},anyproxy_wsUtil.prototype.reqBody=function(o,t){if(o){var e={type:"reqBody",id:o};if(t){var n="r_"+100*Math.random()+"_"+(new Date).getTime();e.reqRef=n,this.bodyCbMap[n]=t}this.send(e)}},"undefined"!=typeof module&&(module.exports=anyproxy_wsUtil);