'use strict';var _exports;function init(){const a=require('../../lib/react.js'),b=require('../../lib/react-dom.js'),c=require('./webviewheader.js'),d=require('./webviewbody.js'),e=require('./webviewfooter.js'),f=require('./webviewloading.js'),g=require('./webviewshare.js'),h=require('./webviewcard.js'),i=require('./webviewAuthorizeDialog.js'),j=require('../../stores/webviewStores.js'),k=require('../../actions/windowActions.js'),l=require('../../cssStr/cssStr.js'),m=a.createClass({displayName:'Webview',getInitialState:function(){return{showFooter:!1,showShare:!1,showAuthorizeDialog:!1,shareOpt:{},webviewID:parseInt(this.props.webviewID),showCard:!1,cardInfo:{}}},goBack:function(n){let o=this.state.webviewID,p=b.findDOMNode(this.refs.container).querySelector(`.webviewbody${o}`);this.props.goBack(o,p,n)},showFooter:function(n){let o=n===void 0?!this.state.showFooter:n;this.setState({showFooter:o})},showAuthorizeDialog:function(n){this.setState({showAuthorizeDialog:n===void 0?!this.state.showAuthorizeDialog:n})},showShare:function(n){this.setState({showShare:n})},_showShareWebview:function(n,o,p){this.setState({showShare:!0,showFooter:!1,shareOpt:{title:p.title,desc:p.desc||p.title,imgUrl:p.img_url,sdkName:o.sdkName}})},_cardSdk:function(n,o,p,q,r){this.setState({showCard:!0,cardInfo:{sdkName:o,data:r,webviewID:n,isHavePurview:q,cardData:p}}),k.disAbleURLBar()},closeCard:function(){this.setState({showCard:!1,cardType:'',cardWebviewID:''}),k.ableURLBar()},componentDidMount:function(){j.on(`SHOW_SHARE_WEBVIEW_${this.state.webviewID}`,this._showShareWebview),j.on('CRAD_SDK_RES',this._cardSdk)},componentWillUnmount:function(){j.removeListener(`SHOW_SHARE_WEBVIEW_${this.state.webviewID}`,this._showShareWebview),j.removeListener('CRAD_SDK_RES',this._cardSdk)},render:function(){let{webviewID:n,project:o,offset:p,isTabWebview:q,href:r,pageJSON:s,appJSON:t,isMap:u,chooseLocation:v,closeLocation:w,hideBack:x,goBack:y,getSimulatorActions:z,postAppRoute:A,type:B,shareBtnShow:C}=this.props,D=s.backgroundColor||t.window.backgroundColor||'#ffffff',E={width:p.width,backgroundColor:D},F={width:p.width,height:p.height},G=this.props.project?null:a.createElement(h,{showCard:this.state.showCard,cardInfo:this.state.cardInfo,closeCard:this.closeCard}),H=this.props.project?null:a.createElement(g,{webviewID:n,getSimulatorActions:z,show:this.state.showShare,showShare:this.showShare,showFooter:this.showFooter,shareOpt:this.state.shareOpt}),I=this.state.showCard?l.webviewDisplayNone:{};return a.createElement('div',{ref:'container',className:'simulator',style:E},a.createElement('div',{style:I},a.createElement(c,{showRecordWording:this.props.showRecordWording,offset:p,hideBack:x,webviewID:n,project:o,isMap:u,chooseLocation:v,closeLocation:w,pageJSON:s,appJSON:t,goBack:this.goBack,showFooter:this.showFooter}),this.props.topTabDom,a.createElement('div',{className:'simulator-bd',style:F},a.createElement(f,{webviewID:n}),H,a.createElement(d,{type:B,isMap:u,chooseLocation:v,closeLocation:w,offset:p,href:r,webviewID:n,project:o,getSimulatorActions:z,postAppRoute:A,isTabWebview:q,goBack:this.goBack}),a.createElement(e,{shareBtnShow:C,project:o,offset:p,webviewID:n,getSimulatorActions:z,show:this.state.showFooter,showFooter:this.showFooter}),a.createElement(i,{webviewID:n,getSimulatorActions:z,show:this.state.showAuthorizeDialog,showAuthorizeDialog:this.showAuthorizeDialog}))),G)}});_exports=m}init(),module.exports=_exports;