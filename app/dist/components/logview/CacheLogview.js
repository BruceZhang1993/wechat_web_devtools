"use strict";var React=require("../../lib/react.js"),Cachelogitem=require("./inc/Cachelogitem.js"),cssStr=require("../../cssStr/cssStr.js"),wechatCacheStores=require("../../stroes/wechatCacheStores.js"),webviewStores=require("../../stroes/webviewStores.js"),webviewNum=0,CacheLogview=React.createClass({displayName:"CacheLogview",getInitialState:function(){return{webviewID:0,list:{0:{logs:[],errNum:0}}}},componentDidMount:function(){var e=this;webviewStores.on("DELETE_WEBVIEW_ID",function(t){delete e.state.list[t]}),webviewStores.on("CHANGE_WEBVIEW_ID",function(t){e.setState({webviewID:t})}),webviewStores.on("WEBVIEW_SDK",function(t,a,s,i,c){if("openUrlWithExtraWebview"===s){webviewNum++;var r=Object.assign({},e.state.list);r[webviewNum]={logs:[],errNum:0},e.setState({webviewID:webviewNum,list:r})}}),webviewStores.on("GETA_8KEY_DONE",function(t){var a=Object.assign({},e.state.list);a[t]={logs:[],errNum:0},e.setState({list:a})}),wechatCacheStores.on("GET_CACHE_JSON",function(t,a){var s=Object.assign({},e.state.list),i=s[t];i.logs.unshift({type:"json",cache:a}),e.setState({list:s})}),wechatCacheStores.on("GET_CACHE_FILE",function(t,a,s){var i=Object.assign({},e.state.list),c=i[t];c.logs.unshift({type:"get-cache-file",url:a,version:s}),e.setState({list:i})}),wechatCacheStores.on("MATCH_CACHE_FILE",function(t,a,s){var i=Object.assign({},e.state.list),c=i[t];c.logs.unshift({type:"match-cache-file",url:a,version:s}),e.setState({list:i})})},handleOnClick:function(){var e=this.state.webviewID,t=Object.assign({},this.state.list);t[e]={logs:[],errNum:0},this.setState({list:t})},render:function(){var e=this,t=this.state.webviewID,a=this.state.list[t].logs,s=a.map(function(t,a){return React.createElement(Cachelogitem,{key:a,data:t,webviewID:e.state.webviewID})});return React.createElement("div",{style:"CacheLogview"===this.props.selectSta?cssStr.displayBlock:cssStr.displayNone,className:"cache-logview"},React.createElement("div",{className:"cache-logview-header"},React.createElement("div",{className:"cache-logview-header_type"},"type"),React.createElement("div",{className:"cache-logview-header_name"},"name"),React.createElement("div",{className:"cache-logview-header_version"},"file version"),React.createElement("div",{className:"cache-logview-header_info"},"info"),React.createElement("div",{onClick:this.handleOnClick,className:"cache-logview-header_clear"},React.createElement("a",{className:"cache-logview-clear_a",href:"javascript:;"},"清除记录"))),React.createElement("div",{className:"cache-logview-body"},s))}});module.exports=CacheLogview;