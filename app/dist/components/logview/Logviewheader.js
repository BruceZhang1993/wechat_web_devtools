"use strict";var React=require("../../lib/react.js"),Logindisplay=require("../login/Logindisplay.js"),cssStr=require("../../cssStr/cssStr.js"),windowStores=require("../../stroes/windowStores.js"),webviewStores=require("../../stroes/webviewStores.js"),webviewNum=0,Logviewheader=React.createClass({displayName:"Logviewheader",getInitialState:function(){return{webviewID:0,list:{0:{sliderStyle:{},devtoolsErrNum:0,sdkLogErrNum:0,selectSta:"Devtoolsview"}}}},setSliderStyle:function(){var e=Object.assign({},this.state.list);for(var t in e){var s=e[t],a=this.refs[s.selectSta],i=a.offsetLeft,r=a.offsetWidth,o=.8*r,l=i+.1*r;s.sliderStyle={width:o+"px",transform:"translateX("+l+"px)"}}this.setState({list:e});var n=e[this.state.webviewID].selectSta;this.props.changeSelectSta(n)},componentDidMount:function(){var e=this;webviewStores.on("DELETE_WEBVIEW_ID",function(t){delete e.state.list[t]}),webviewStores.on("CHANGE_WEBVIEW_ID",function(t){e.setState({webviewID:t})}),webviewStores.on("WEBVIEW_SDK",function(t,s,a,i,r){"openUrlWithExtraWebview"===a&&(webviewNum++,e.state.list[webviewNum]={sliderStyle:{},devtoolsErrNum:0,sdkLogErrNum:0,selectSta:"Devtoolsview"},e.state.webviewID=webviewNum,e.setSliderStyle())}),webviewStores.on("GETA_8KEY_DONE",function(t){var s=Object.assign({},e.state.list);s[t].devtoolsErrNum=0,s[t].sdkLogErrNum=0,e.setState({list:s})}),webviewStores.on("UP_WEBVIEW_ERRNUM",function(t,s){var a=Object.assign({},e.state.list);a[t].devtoolsErrNum=s,e.setState({list:a})}),windowStores.on("UP_SDK_ERRNUM",function(t,s){var a=Object.assign({},e.state.list);a[t].sdkLogErrNum=s,e.setState({list:a})}),windowStores.on("CHANGE_DEVTOOLS",function(){var t=e.state.webviewID;e.state.list[t].selectSta="Devtoolsview",e.setSliderStyle()}),windowStores.on("TOGGLE_SHARE_MENUS",function(){e.setSliderStyle()}),this.setSliderStyle()},handleOnClick:function(e){var t=e.target,s=t.dataset,a=s.type,i=("DIV"===t.tagName?t:t.parentNode,this.state.webviewID);this.state.list[i].selectSta=a,this.setSliderStyle()},render:function(){var e=this.state.webviewID,t=this.state.list[e],s=t.devtoolsErrNum,a=t.sdkLogErrNum,i=t.sliderStyle,r=global.appConfig.project,o=global.appConfig.cache;return React.createElement("div",{className:"header-content"},React.createElement("div",{className:"header-content_menu-container"},React.createElement("div",{ref:"container",onClick:this.handleOnClick,className:"header-content_menu"},React.createElement("div",{ref:"Devtoolsview","data-type":"Devtoolsview"},React.createElement("span",{"data-type":"Devtoolsview"},"调试"),React.createElement("span",{"data-type":"Devtoolsview",style:s?{}:cssStr.displayNone,className:"warn_circle"},s)),React.createElement("div",{ref:"SdkLogview","data-type":"SdkLogview"},React.createElement("span",{"data-type":"SdkLogview"},"JS-SDK"),React.createElement("span",{"data-type":"SdkLogview",style:a?{}:cssStr.displayNone,className:"warn_circle"},a)),React.createElement("div",{style:o?{}:cssStr.displayNone,ref:"CacheLogview","data-type":"CacheLogview"},"离线存储"),React.createElement("div",{ref:"Purviewview","data-type":"Purviewview"},"权限列表"),React.createElement("div",{style:r?{}:cssStr.displayNone,ref:"Projectview","data-type":"Projectview"},"项目列表"),React.createElement("div",{ref:"MobileDebugview","data-type":"MobileDebugview"},"移动调试")),React.createElement("div",{style:i,className:"tabbed-pane-tab-slider"})),React.createElement(Logindisplay,null))}});module.exports=Logviewheader;