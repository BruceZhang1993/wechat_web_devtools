"use strict";var React=require("../../lib/react.js"),webviewStores=require("../../stroes/webviewStores.js"),cssStr=require("../../cssStr/cssStr.js"),sdkNameTrans=require("../../common/jssdk/sdkNameTrans.js"),webviewNum=0,Purviewview=React.createClass({displayName:"Purviewview",getInitialState:function(){return{webviewID:0,list:{0:{purviewList:[],noPurviewList:[],appId:""}}}},componentDidMount:function(){var e=this;webviewStores.on("DELETE_WEBVIEW_ID",function(t){delete e.state.list[t]}),webviewStores.on("CHANGE_WEBVIEW_ID",function(t){e.setState({webviewID:t})}),webviewStores.on("WEBVIEW_SDK",function(t,i,s,a,r){if("openUrlWithExtraWebview"===s){webviewNum++;var v=Object.assign({},e.state.list);v[webviewNum]={purviewList:[],noPurviewList:[],appId:""},e.setState({webviewID:webviewNum,list:v})}}),webviewStores.on("GETA_8KEY_DONE",function(t){var i=Object.assign({},e.state.list);i[t]={purviewList:[],noPurviewList:[],appId:""},e.setState({list:i})}),webviewStores.on("GET_JASSDK_LOG",function(t,i,s,a,r){if("PREVERIFY_SDK"===r.type){for(var v=[],w=i.args.verifyJsApiList,n=0,l=w.length;l>n;n++){var c=w[n];r.purviewFromPreVerify[c]||v.push(c)}for(var o=Object.keys(r.purviewFromPreVerify),p=r.purviewFormGetA8key,u=r.defaultPurview,m=[],n=0,l=v.length;l>n;n++){var c=v[n];p[c]||u[c]||m.push(c)}var d=Object.assign({},e.state.list);d[t]={appId:i.args.appId,purviewList:o,noPurviewList:m},e.setState({list:d})}})},render:function(){var e=this.state.webviewID,t=this.state.list[e].purviewList,i=this.state.list[e].noPurviewList,s=this.state.list[e].appId,a=t.map(function(e){return React.createElement("div",{className:"purview-logview-body_item",key:e},sdkNameTrans.getSdkDisplayName(e))}),r=i.map(function(e){return React.createElement("div",{className:"purview-logview-body_item",key:e},e)});return React.createElement("div",{style:"Purviewview"===this.props.selectSta?cssStr.displayBlock:cssStr.displayNone,className:"purview-logview"},React.createElement("div",{className:"purview-logview-appId"},React.createElement("span",{className:"purview-logview-appId_name"},"appId: "),React.createElement("span",{className:"purview-logview-appId_id"},s)),React.createElement("div",{className:"purview-logview-header"},"通过 wx.config 获取到的权限"),React.createElement("div",{className:"purview-logview-body"},a),React.createElement("div",{className:"purview-logview-header",style:r.length?{}:cssStr.displayNone},"通过 wx.config 未获取到的权限"),React.createElement("div",{className:"purview-logview-body",style:r.length?{}:cssStr.displayNone},r))}});module.exports=Purviewview;