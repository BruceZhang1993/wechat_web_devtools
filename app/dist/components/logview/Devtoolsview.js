"use strict";var React=require("../../lib/react.js"),webviewStores=require("../../stroes/webviewStores.js"),cssStr=require("../../cssStr/cssStr.js"),Devtoolsview=React.createClass({displayName:"Devtoolsview",hideAllDevtools:function(){for(var e=this.refs.container.childNodes,t=0;t<e.length;t++)e[t].style.cssText="width:0.1px;height:0.1px"},componentDidMount:function(){var e=this;webviewStores.on("DELETE_WEBVIEW_ID",function(t){var o=e.refs.container.querySelector(".devtools"+t);o.parentNode.removeChild(o)}),webviewStores.on("CHANGE_WEBVIEW_ID",function(t){e.hideAllDevtools();var o=e.refs.container.querySelector(".devtools"+t);o.style.cssText=""}),webviewStores.on("SET_WEBVIEW_OFFSET",function(t){e.devtoolsview.contentWindow.postMessage({command:"setEmulate",width:t.width,height:t.height,dpr:t.dpr},"*")}),webviewStores.on("OPEN_WEBVIEW_DEVTOOLS",function(t,o){e.hideAllDevtools();var s=e.devtoolsview=document.createElement("webview");s.setAttribute("partition","persist:devtools"),s.className="devtools-content_container devtools"+t,s.addContentScripts([{name:"myRules",matches:["<all_urls>"],js:{files:["views/dist/inject/devtoolsBrige.js"]},run_at:"document_end"}]),s.addEventListener("contentload",function(e){var t=webviewStores.getOffset();s.contentWindow.postMessage({command:"init",width:t.width,height:t.height,dpr:t.dpr},"*")}),window.addEventListener("message",function(e){var t=e.data||{};if("devtoolsBrige"===t.comefrom){var o=t.type;"alert"===o&&alert(t.msg)}}),s.src="about:blank",e.refs.container.appendChild(s),s.addEventListener("loadcommit",function(){o.showDevTools(!0,s)})})},render:function(){var e={width:.1,height:.1,paddingBottom:0};return React.createElement("div",{style:"Devtoolsview"===this.props.selectSta?{}:e,ref:"container",className:"devtools-content"})}});module.exports=Devtoolsview;