"use strict";var React=require("../../lib/react.js"),cssStr=require("../../cssStr/cssStr.js"),webviewStores=require("../../stroes/webviewStores.js"),webviewActions=require("../../actions/webviewActions.js"),leftviewActions=require("../../actions/leftviewActions.js"),leftviewStores=require("../../stroes/leftviewStores.js"),Webviewtabbar=React.createClass({displayName:"Webviewtabbar",getInitialState:function(){return{webviewID:parseInt(this.props.webviewID),barStyle:{},selectItemStyle:{},items:[],selectedIndex:0}},_setInterfaceRes:function(e,t,s,a){var i=a.args,r=i.items||[];if(r.length){if("setTabBar"===t){var o={backgroundColor:i.backgroundColor||"#ffffff",color:i.textColor||"#000000",borderColor:i.borderColor||"#ccc"},c={color:i.selectedTextColor};this.setState({barStyle:o,selectItemStyle:c,items:r})}this.props.showTabbar(this.state.webviewID)}},_leftStatusUp:function(e,t){this.setState({barStyle:{},selectItemStyle:{},items:[],selectedIndex:0}),this.props.showTabbar(this.state.webviewID,!0)},componentDidMount:function(){webviewStores.on("SET_INTERFACE_RES_"+this.state.webviewID,this._setInterfaceRes),leftviewStores.on("LEFT_STATUS_UP_"+this.state.webviewID,this._leftStatusUp)},componentWillUnmount:function(){webviewStores.removeListener("SET_INTERFACE_RES_"+this.state.webviewID,this._setInterfaceRes),leftviewStores.removeListener("LEFT_STATUS_UP_"+this.state.webviewID,this._leftStatusUp)},handleOnClick:function(e){var t=parseInt(e.currentTarget.dataset.index);this.setState({selectedIndex:t}),webviewActions.setWebviewAction(this.state.webviewID,{act:"sendMsg",sdkName:"onTabBarClick",res:{selectedIndex:t}})},render:function(){var e=this,t=this.state.items.map(function(t,s){var a=s==e.state.selectedIndex,i=a?t.selectedIconData:t.iconData,r=a&&e.state.selectItemStyle.color?e.state.selectItemStyle:{};return React.createElement("div",{key:s,onClick:e.handleOnClick,className:"body-webview-tabbar_item","data-index":s},React.createElement("img",{className:"body-webview-tabbar_img",src:i}),React.createElement("span",{style:r,className:"body-webview-tabbar_text"},t.text))});return React.createElement("div",{className:"body-webview-tabbar",style:this.state.barStyle},t)}});module.exports=Webviewtabbar;