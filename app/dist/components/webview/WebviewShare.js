"use strict";var React=require("../../lib/react.js"),cssStr=require("../../cssStr/cssStr.js"),webviewStores=require("../../stroes/webviewStores.js"),webviewActions=require("../../actions/webviewActions.js"),leftviewActions=require("../../actions/leftviewActions.js"),leftviewStores=require("../../stroes/leftviewStores.js"),WebviewShare=React.createClass({displayName:"WebviewShare",getInitialState:function(){return{show:!1,title:"",desc:"",imgUrl:"",sdkName:"",webviewID:parseInt(this.props.webviewID)}},_leftStatusUp:function(e,t,s){this.setState({show:t.showShare})},_showShareWebview:function(e,t,s){this.state.title=s.title,this.state.desc=s.desc||s.title,this.state.imgUrl=s.img_url,this.state.sdkName=t.sdkName,this.state.show=!0,this.setState(this.state),this.upLeftviewStatus()},componentDidMount:function(){leftviewStores.on("LEFT_STATUS_UP_"+this.state.webviewID,this._leftStatusUp),webviewStores.on("SHOW_SHARE_WEBVIEW_"+this.state.webviewID,this._showShareWebview)},componentWillUnmount:function(){leftviewStores.removeListener("LEFT_STATUS_UP_"+this.state.webviewID,this._leftStatusUp),webviewStores.removeListener("SHOW_SHARE_WEBVIEW_"+this.state.webviewID,this._showShareWebview)},upLeftviewStatus:function(){var e=this;setTimeout(function(){leftviewActions.upShareStatus(e.state.webviewID,e.state.show)})},handleCancel:function(){this.sendMsg("cancel")},handleConfirm:function(){this.sendMsg("ok")},sendMsg:function(e){webviewActions.setWebviewAction(this.state.webviewID,{act:"sendMsg",sdkName:this.state.sdkName,res:{errMsg:this.state.sdkName+":"+e}}),this.setState({show:!1}),this.upLeftviewStatus()},render:function(){var e=this.state.show?Object.assign({},cssStr.displayBlock):Object.assign({},cssStr.displayNone);return e.marginLeft=(this.props.offset.width-300)/2,React.createElement("div",{className:"share-layer-container",style:e},React.createElement("div",{className:"share-layer_title",style:"shareTimeline"===this.state.sdkName?cssStr.displayNone:{}},this.state.title),React.createElement("div",{className:"share-layer_body"},React.createElement("img",{src:this.state.imgUrl,width:"54",height:"54"}),React.createElement("div",{className:"share-layer_desc"},this.state.desc)),React.createElement("div",{className:"share-layer-footer"},React.createElement("span",{onClick:this.handleCancel,className:"share-layer-footer_button"},"取消"),React.createElement("span",{onClick:this.handleConfirm,className:"share-layer-footer_button share-layer-footer_button1"},"确定")))}});module.exports=WebviewShare;