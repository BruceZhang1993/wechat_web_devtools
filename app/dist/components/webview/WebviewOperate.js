"use strict";var React=require("../../lib/react.js"),cssStr=require("../../cssStr/cssStr.js"),WebviewHeader=require("./WebviewHeader.js"),WebviewBody=require("./WebviewBody.js"),WebviewFooter=require("./WebviewFooter.js"),WebviewShare=require("./WebviewShare.js"),WebviewMark=require("./WebviewMask.js"),webviewStores=require("../../stroes/webviewStores.js"),webviewActions=require("../../actions/webviewActions.js"),webviewNum=0,WebviewOperate=React.createClass({displayName:"WebviewOperate",getInitialState:function(){return{webviewID:0,show:!1,list:{0:{preWebviewID:0,sdkErrNum:0,devErrNum:0,imgURI:""}}}},_deleteWebviewID:function(e){var t=this.state.list[e].preWebviewID,i=Object.assign({},this.state.list);delete i[e],this.setState({webviewID:t,list:i})},_webviewSDK:function(e,t,i,s,a){if("openUrlWithExtraWebview"===i){webviewNum++;var r=Object.assign({},this.state.list);r[webviewNum]={preWebviewID:e,sdkErrNum:0,devErrNum:0},this.setState({webviewID:webviewNum,list:r})}},_setWebviewSnapshot:function(e,t){var i=Object.assign({},this.state.list);i[e].imgURI=t.dataURI,this.setState({list:i})},componentDidMount:function(){webviewStores.on("DELETE_WEBVIEW_ID",this._deleteWebviewID),webviewStores.on("WEBVIEW_SDK",this._webviewSDK),webviewStores.on("SET_WEBVIEW_SNAPSHOT",this._setWebviewSnapshot)},componentWillUnmount:function(){webviewStores.removeListener("DELETE_WEBVIEW_ID",this._deleteWebviewID),webviewStores.removeListener("WEBVIEW_SDK",this._webviewSDK),webviewStores.removeListener("SET_WEBVIEW_SNAPSHOT",this._setWebviewSnapshot)},handleOnClick:function(){var e=!this.state.show;this.setState({show:e})},selectWebview:function(e){var t=e.currentTarget,i=t.dataset,s=parseInt(i.webviewid);this.setState({webviewID:s}),webviewActions.changeWebviewID(s)},render:function(){var e=Object.keys(this.state.list).length,t=[];for(var i in this.state.list){var s=this.state.list[i],a=i==this.state.webviewID?"multiple_view_shot selected":"multiple_view_shot";t.push(React.createElement("span",{onClick:this.selectWebview,key:i,"data-webviewid":i,className:a},React.createElement("img",{src:s.imgURI}),React.createElement("span",{className:"warn_circle"},"0")))}var r=this.state.show?"multiple_view show":"multiple_view";return React.createElement("div",{className:r,style:e>1?{}:cssStr.displayNone},React.createElement("div",{className:"multiple_view_header"},React.createElement("p",null,React.createElement("span",null,"正在调试"),React.createElement("span",null,e),React.createElement("span",null,"个页面")),React.createElement("div",{className:"multiple_view_menu",onClick:this.handleOnClick},React.createElement("span",{className:"multiple_view_arrow up"}),React.createElement("span",{className:"warn_circle"},"0"))),React.createElement("div",{className:"multiple_view_body"},t))}});module.exports=WebviewOperate;