"use strict";var React=require("../../lib/react.js"),cssStr=require("../../cssStr/cssStr.js"),webviewActions=require("../../actions/webviewActions.js"),windowActions=require("../../actions/windowActions.js"),windowStores=require("../../stroes/windowStores.js"),wechatCacheActions=require("../../actions/wechatCacheActions.js"),wechatCacheStores=require("../../stroes/wechatCacheStores.js"),Cachebutton=React.createClass({displayName:"Cachebutton",getInitialState:function(){return{showMenus:!1}},handleOnClick:function(e){e.stopPropagation();var a=this.state.showMenus;this.setState({showMenus:!a})},handleForClear:function(e){var a=this;e.stopPropagation();var t=e.currentTarget,c=t.dataset,s=c.type;t.classList.add("show-clear_done");var n=function(){setTimeout(function(){t.classList.remove("show-clear_done"),a.setState({showMenus:!1})},1e3)};"cookie"===s?webviewActions.clearWebview({cookies:!0,callBack:n}):"cache"===s?webviewActions.clearWebview({appcache:!0,cache:!0,fileSystems:!0,indexedDB:!0,localStorage:!0,webSQL:!0,callBack:n}):"historyUrl"===s?windowActions.clearAddressHistory({callBack:n}):"wechatCache"===s&&wechatCacheActions.clearCache({callBack:n})},componentDidMount:function(){var e=this;windowStores.on("BODY_CLICK",function(){e.setState({showMenus:!1})})},render:function(){var e=global.appConfig.cache;return React.createElement("div",{className:"js_cacheButtons"},React.createElement("div",{onClick:this.handleOnClick,className:"main-header_button"},React.createElement("div",{"data-type":"clear",className:"header_button"},React.createElement("img",{src:"../images/clean.png",alt:"setting"}),React.createElement("p",null,"清除缓存"))),React.createElement("div",{style:this.state.showMenus?{}:cssStr.displayNone,className:"container-popover container-popover_clear"},React.createElement("ul",{className:"container-popover_ulist"},React.createElement("li",{style:e?{}:cssStr.displayNone,onClick:this.handleForClear,"data-type":"wechatCache"},"清除离线缓存",React.createElement("span",{className:"clear_done"},"已清除"),React.createElement("span",{className:"clear_loading"})),React.createElement("li",{onClick:this.handleForClear,"data-type":"cookie"},"清除开发者工具cookie",React.createElement("span",{className:"clear_done"},"已清除"),React.createElement("span",{className:"clear_loading"})),React.createElement("li",{onClick:this.handleForClear,"data-type":"cache"},"清除开发者工具缓存",React.createElement("span",{className:"clear_done"},"已清除"),React.createElement("span",{className:"clear_loading"})),React.createElement("li",{onClick:this.handleForClear,"data-type":"historyUrl"},"清除地址栏历史记录",React.createElement("span",{className:"clear_done"},"已清除"),React.createElement("span",{className:"clear_loading"})))))}});module.exports=Cachebutton;