"use strict";var urlConfig=require("../../config/urlConfig.js"),request=require("../request/request.js"),windowActions=require("../../actions/windowActions.js"),log=require("../log/log.js"),loadConfigData={type:7,version:nw.App.manifest.version};module.exports=function(){log.info("init.js loadinit begin"),window.addEventListener("error",function(i){var n=i.filename,o=i.message;log.error("filename: "+n+", msg: "+o)}),request({method:"post",url:urlConfig.LOADCONFIG_URL,body:JSON.stringify(loadConfigData),needToken:!1},function(i,n,o){i?log.info("init.js loadinit error: "+JSON.stringify(i)):!function(){log.info("init.js loadinit end: "+o);var i=JSON.parse(o),n=i.cgi_list,e={};n.forEach(function(i){e[i.name]=i.url}),localStorage.setItem("urlConfig",JSON.stringify(e));var r=i.client_list,t={};r.forEach(function(i){t[i.key]=i.value}),windowActions.updataInitInfo(e,t)}()})};