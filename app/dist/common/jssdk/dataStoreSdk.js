"use strict";function getLocalStorage(e,a,r,t){var o=sdkNameTrans.getSdkDisplayName(a.sdkName);if(e){var s=function(){var e=a.args,r=e.appid||"123",s=path.join(userCachePath,r),i=fs.existsSync(s),n=e.key;return i?void fs.readFile(s,"utf8",function(e,a){if(!e){a=JSON.parse(a);var r=a[n];t({errMsg:o+":ok",dataType:r.storeDataType,data:r.storeData})}}):(t({errMsg:o+":fail,can not find "+n}),{v:void 0})}();if("object"===("undefined"==typeof s?"undefined":_typeof(s)))return s.v}else t({errMsg:o+":"+sdkConfig.failWroding})}function clearLocalStorage(e,a,r,t){var o=sdkNameTrans.getSdkDisplayName(a.sdkName);if(e){var s=a.args,i=s.appid||"123",n=path.join(userCachePath,i),f=fs.existsSync(n);f?fs.unlink(n,function(e){e||t({errMsg:o+":ok"})}):t({errMsg:o+":ok"})}else t({errMsg:o+":"+sdkConfig.failWroding})}function setLocalStorage(e,a,r,t){var o=sdkNameTrans.getSdkDisplayName(a.sdkName);if(e){var s=a.args,i=s.appid||"123",n=path.join(userCachePath,i),f=fs.existsSync(n),d=s.key,c=s.data,g=s.dataType,l=f?JSON.parse(fs.readFileSync(n)):{};l[d]={storeData:c,storeDataType:g},fs.writeFile(n,JSON.stringify(l),function(e){e||t({errMsg:o+":ok"})})}else t({errMsg:o+":"+sdkConfig.failWroding})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},fs=require("fs"),path=require("path"),mkdir=require("mkdir-p"),sdkConfig=require("./sdkConfig.js"),sdkNameTrans=require("./sdkNameTrans.js"),userCachePath=nw.App.getDataPath(),dataStorePath=path.join(userCachePath,"dataStore");mkdir.sync(dataStorePath);var exec=function(e,a,r,t){var o=(a.args,a.ext,a.sdkName);"setLocalStorage"===o?setLocalStorage(e,a,r,t):"getLocalStorage"===o?getLocalStorage(e,a,r,t):"clearLocalStorage"===o&&clearLocalStorage(e,a,r,t)};module.exports={exec:exec};