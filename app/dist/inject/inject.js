"use strict";function _receiveMessage(e){var a=e.origin;if(-1!==a.indexOf("chrome-extension://")){appWindow&&appOrigin?appWindow!==e.source&&(appWindow=e.source):(appWindow=e.source,appOrigin=e.origin);var n=e.data.command,i={command:n};"COMMAND_GET_TITLE"===n&&(i.title=document.title,_sendMessageToNW(i),snapshot())}else{var i=void 0;try{i=JSON.parse(e.data)}catch(o){return}i.command="COMMAND_FROM_WEBPAGE",_sendMessageToNW(i)}}function snapshot(){document.body&&window.html2canvas&&html2canvas(document.body).then(function(e){var a=e.toDataURL(),n={command:"COMMAND_GET_SNAPSHOT",dataURI:a};_sendMessageToNW(n)})["catch"](function(e){})}function _sendMessageToNW(e){appWindow&&appOrigin&&(e.webviewID=webviewID,appWindow.postMessage(e,appOrigin))}function _sendMessageToWebpage(e){window.postMessage(e,"*")}var appWindow,appOrigin,ua=navigator.userAgent,webviewID=parseInt(ua.match(/webview\/(\d*)/)[1]);window.addEventListener("message",_receiveMessage);