'use strict';!function(require,directRequire){function a(a,b,c,d){c=0<c?c:1;let e=h(a,b,c);return`${d}\n${e}`}const b=require('fs'),c=require('path'),d=require('./3bfffbe88b3d923921f851c0697974fe.js'),e=require('./949d8235c744ced2a80121e4dba34c28.js'),f=require('./6242f55dbdfe53c2f07b7a51568311f2.js').errorPrefix,g=require('./libs/jsonlint.js').parser,h=require('babel-code-frame');g.parseError=g.lexer.parseError=function(a,b){throw b};const i=f.WXML_ERROR,j=f.WXML_LOSE_ERROR,k={};k.parseWXMLRuntimeErr=(e)=>{let g=d.getCurrent(),h=e.message.replace(f.WXML_RUNTIME_ERROR,''),i=h.split(':'),j=parseInt(i[2]),k=parseInt(i[3]);if(-1===j);else try{let d=b.readFileSync(c.join(g.projectpath,i[0]),'utf8'),e=h.replace(`${i[0]}:${i[1]}:${i[2]}:${i[3]}:`,'').replace(/`/g,'"'),f=a(d,j,k,e);return{file:i[0],reason:e,msg:f}}catch(a){return{file:i[0],msg:a}}},k.parseJsFileErr=(a)=>{let d=a.file.replace(/\.js$/,''),e=a.project,f=JSON.parse(b.readFileSync(c.join(e.projectpath,'app.json'),'utf8')),g=f.pages,h=g.findIndex((a)=>{return a==d});return{file:d,msg:` app.json.pages\n > | pages[${h}] : ${g[h]}`}},k.parseJsonContentErr=(a)=>{return{file:a.file,msg:a.data}},k.parseJsonEntranceErr=(a)=>{let b=JSON.parse(a.data),c=b.pages;return{file:a.file,msg:`未找到入口页面\napp.json 中定义的 pages : ${JSON.stringify(c)}`}},k.parseJsonFileErr=(a)=>{return{file:a.file,msg:`未找到入口 ${a.file} 文件，或者文件读取失败，请检查后重新编译。`}},k.parseJsonParseErr=(b)=>{let c=b.data,d=b.e;try{g.parse(c)}catch(d){let e=`Expecting ${d.expected}, got ${d.token}`,f=a(c,d.line,d.loc.first_column,e);return b.msg=f,delete b.data,delete b.e,b}return b.msg=b.e.toString(),b},k.parseWxmlErr=(d,e)=>{let f=(e||'').trim().split(':');try{if(f.length){let e=c.join(d.projectpath,f[0]),g=parseInt(f[1].trim()),h=parseInt(f[2].trim()-1),i=a(b.readFileSync(e,'utf8'),g,h,f[3]),j={file:f[0],msg:i};return j}}catch(a){return e}},k.parseWxmlLoseErr=(a,b)=>{let c=b.match(/(\d.*?)\:/),d=c[1],e=JSON.parse(b.replace(c[0],'')),f=`未找到 ${e.pages[d]}.wxml 文件 \n > ${d} ${e.pages[d]}`;return`${j}${encodeURIComponent(f)}`},k.parseWxssErr=(d,e)=>{try{if(e=e.split('\n')[0],/not found from/.test(e)){let a=e.match(/ERR:.+?`(.+)`.+?`(.+)`/),b=a[1],c=a[2],d={file:c,msg:`File not found: ${b}`};return d}let f=e.match(/ERR:\s(.+)\((\d*):(\d*)\):\s*?(.+)/),g=parseInt(f[2]),h=parseInt(f[3]-1),i=f[4].replace(/`/g,'"'),j=f[1],k=b.readFileSync(c.join(d.projectpath,j),'utf8'),l=a(k,g,h,i);return{file:j,reason:i,msg:l}}catch(a){}},module.exports=k}(require('lazyload'),require);