'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};!function(require,directRequire){const a=require('path'),b=require('fs'),c=require('lodash'),{REHYDRATE:d}=require('redux-persist/constants'),e=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),f=require('./84858de8a097c9cf84ff2c2e3d86e2a9.js'),g=require('./72653d4b93cdd7443296229431a7aa9a.js'),h=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),i=require('./92320c1386e6db6a6f2556736a9bc280.js'),j=require('./d28a711224425b00101635efe1034c99.js'),k=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),{default_weapp_header:l}=require('./5498e660c05c574f739a28bd5d202cfa.js'),m=()=>{let a,b=f.lastSelect;return f.projectList[b]?(a=f.projectList[b],a&&a.qcloud&&delete a.qcloud):a=null,{current:a,list:f.projectList}};module.exports=function(f=m(),h={}){switch(h.type){case e.PROJECT_CREATE_PROJECT_SUCCESS:return _extends({},f,{list:_extends({},f.list,{[h.project.projectid]:h.project})});case e.PROJECT_UPDATE_LIST:return _extends({},f,{list:h.list});case e.PROJECT_UPDATE_ATTR:{let a=h.project,b=a?_extends({},a):_extends({},f.current),c=h.data,d=c.appid;return b.attr=_extends({},b.attr,c),c.userbanded&&(b.appShowName=c.appName,b.appShowImageUrl=c.appImageUrl||l,d==b.appid?(b.attr.appName=c.appName,b.attr.appImageUrl=c.appImageUrl):b.attr.extInfo=_extends({},b.attr.extInfo,{appName:c.appName,appImageUrl:c.appImageUrl})),a&&a.projectid!==b.projectid?_extends({},f,{list:_extends({},f.list,{[a.projectid]:b})}):_extends({},f,{current:b})}case e.PROJECT_OPEN_PROJECT:{let a=f.list[h.projectid];if(!a)return g.warn(`project.reducer.js open a project with unknown projectid: ${h.projectid}`),f;return a.qcloud&&delete a.qcloud,_extends({},f,{current:a})}case e.PROJECT_SET_COMPILE_CONDICTION:{let a=f.current.compileType,b=f.current.condiction[a]||{},c=[].concat(b.list||[]),d=-1==h.data.id?c.length:h.data.id;return c[d]=_extends({},h.data),_extends({},f,{current:_extends({},f.current,{condiction:_extends({},f.current.condiction,{[a]:{current:d,list:c}})})})}case e.PROJECT_SELECT_COMPILE_CONDICTION:{let a=f.current.compileType,b=f.current.condiction[a]||{};return _extends({},f,{current:_extends({},f.current,{condiction:_extends({},f.current.condiction,{[a]:_extends({},b,{current:h.current})})})})}case e.PROJECT_REMOVE_COMPILE_CONDICTION:{let a=h.data.id,b=f.current.compileType,c=f.current.condiction[b]||{},d=[].concat(c.list||[]);return d.splice(a,1),_extends({},f,{current:_extends({},f.current,{condiction:_extends({},f.current.condiction,{[b]:{current:-1,list:d}})})})}case e.PROJECT_SET_SETTING:return _extends({},f,{current:_extends({},f.current,{setting:_extends({},f.current.setting,h.data)})});case e.PROJECT_SET_LIBVERSION:return _extends({},f,{current:_extends({},f.current,{libVersion:h.data})});case e.PROJECT_SET_STORAGE:{let c=h.data.openid,d=h.data.cache,e=`${f.current.hash}_${c}`;try{let c=a.join(i.WeappStorage,`${e}.json`);b.writeFileSync(c,JSON.stringify(d),'utf8')}catch(a){return f}return _extends({},f,{current:_extends({},f.current,{storage:{openid:c,cache:d}})})}case e.PROJECT_SET_COMPILE_TYPE:return _extends({},f,{current:_extends({},f.current,{compileType:h.data})});case e.PROJECT_SET_QCLOUD:{const a=f.current.qcloud||{};return _extends({},f,{current:_extends({},f.current,{qcloud:_extends({},a,h.data)})})}case e.PROJECT_SET_PKG_SIZE:{let a=f.current.pkgSize||{};return a=_extends({},a,h.data),_extends({},f,{current:_extends({},f.current,{pkgSize:a})})}case e.PROJECT_CLOSE_PROJECT:return _extends({},f,{current:null});case e.PROJECT_REMOVE_PROJECT:{const a={};return f.current&&f.current.id===h.id&&(a.current=null),a.list=_extends({},f.list),delete a.list[h.id],_extends({},f,a)}case d:return c.merge(c.cloneDeep(f),h.payload.project);default:return f;}}}(require('lazyload'),require);