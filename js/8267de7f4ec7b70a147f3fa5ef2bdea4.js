'use strict';!function(require,directRequire){function a(a,b,c,d){c=0<c?c:1;let e=h(a,b,c);return`${d}\n${e}`}async function b(b){let h=await k(b),l=h.srcPath,m=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),n='app.json',q='';try{q=h.getFile(n)}catch(a){let b=new Error(g.config.FILE_NOT_FOUND.formateLocales(n));throw b.code=p.APP_JSON_READ_ERR,b.ext=a.toString(),b}let r={};try{r=f.parse(q)}catch(b){let c=`Expecting ${b.expected}, got ${b.token}`,d=a(q,b.line,b.loc.first_column,c),e=new Error(d);throw e.code=p.APP_JSON_PARSE_ERR,e}let s=b.compileType,t=r.pages||[];if('array'!=e.getType(t)||0===t.length){let a=new Error(g.config.ENTRANCE_NOT_FOUND.formateLocales(JSON.stringify(t)));throw a.code=p.APP_JSON_ENTRANCE_NOT_FOUND_ERR,a}let u={};for(let a,e=0;e<t.length;e++){if(a=t[e],u[a]){let b=new Error(g.config.JSON_PAGES_REPEAT.formateLocales([n,a]));throw b.code=p.APP_JSON_PAGES_ERR,b}if(u[a]=!0,!d.existsSync(c.join(l,`${t[e]}\.wxml`))){let b=new Error(g.config.JSON_PAGE_WXML_NOT_EXISTS.formateLocales([n,a]));throw b.code=p.APP_JSON_WXML_NOT_FOUND,b}if(!d.existsSync(c.join(l,`${t[e]}\.js`))){let b=new Error(g.config.JSON_PAGE_JS_NOT_EXISTS.formateLocales([n,a]));throw b.code=p.APP_JSON_JS_NOT_FOUND,b}}let v=r.tabBar;if(v){let a;if('array'!=e.getType(v.list))a=new Error(g.config.JSON_TABBAR_SHOULD_BE_LIST);else if(!v.list||v.list.length<m.setting.MinTabbarCount)a=new Error(g.config.JSON_TABBAR_AT_LEAST.formateLocales(m.setting.MinTabbarCount));else if(v.list.length>m.setting.MaxTabbarCount)a=new Error(g.config.JSON_TABBAR_AT_MOST.formateLocales(m.setting.MaxTabbarCount));else{let b=[];for(var w=0;w<v.list.length;w++){let a=v.list[w];if('object'!=e.getType(a)){b.push(g.config.JSON_TABBAR_ITEM_OBJECT.formateLocales(w));continue}let f=a.pagePath;if(!f){b.push(g.config.JSON_TABBAR_PATH_EMPTY.formateLocales(w));continue}if('string'!=e.getType(f)){b.push(g.config.JSON_TABBAR_PATH_STRING.formateLocales(w));continue}2<=f.split('?').length&&b.push(g.config.JSON_TABBAR_PATH_NOT_CONTAIN.formateLocales([w,'?'])),2<=f.split('.').length&&b.push(g.config.JSON_TABBAR_PATH_NOT_CONTAIN.formateLocales([w,'.']));let h=[];if(a.iconPath){let b=c.join(l,a.iconPath);a.iconPath=c.relative(l,b),h.push({name:'iconPath',path:b})}if(a.selectedIconPath){let b=c.join(l,a.selectedIconPath);a.selectedIconPath=c.relative(l,b),h.push({name:'selectedIconPath',path:b})}h.forEach((a)=>{if(!d.existsSync(a.path))return b.push(g.config.JSON_TABBAR_ICON_NOT_FOUND.formateLocales([w,a.name]));let e=d.statSync(a.path);if(e.isDirectory())return b.push(g.config.JSON_TABBAR_ICON_NOT_DIR.formateLocales([w,a.name]));e.size>1024*m.setting.MaxTabbarIconSize&&b.push(g.config.JSON_TABBAR_ICON_MAX_SIZE.formateLocales([w,a.name,m.setting.MaxTabbarIconSize]));let f=c.extname(a.path);0>o.indexOf(f)&&b.push(g.config.JSON_TABBAR_ICON_EXT.formateLocales([w,a.name,o.join('\u3001')]))})}0<b.length&&(a=new Error(b.join('\n')))}if(a)throw a.code=p.APP_JSON_CONTENT_ERR,a}if(s==j.conversation||s==j.search){let a,f=r.widgets,h='';if(!f)a=new Error(g.config.JSON_WIDGETS_EMPTY);else if('array'!=e.getType(f))a=new Error(g.config.JSON_WIDGETS_NOT_ARRAY);else{let i=[];f.forEach((a,f)=>{if('object'!=e.getType(a))i.push(g.config.JSON_WIDGETS_ITEM_NOT_OBJECT.formateLocales(f));else if('conversation'!=a.type&&'search'!=a.type)i.push(g.config.JSON_WIDGETS_TYPE_INVALID.formateLocales([f,'conversation\u3001search']));else if(!a.path||'string'!=e.getType(a.path))i.push(g.config.JSON_WIDGETS_PATH_NOT_FOUND.formateLocales(f));else if(!d.existsSync(c.join(l,a.path)))i.push(g.config.JSON_WIDGETS_PATH_NOT_FOUND.formateLocales(f));else{let b=d.statSync(c.join(l,a.path));b.isDirectory()||i.push(g.config.JSON_WIDGETS_PATH_SHOULD_BE_DIR.formateLocales(f))}h||a.type!=b.compileType||(h=a.path)}),h||i.push(g.config.JSON_WIDGETS_TYPE_NOT_FOUND.formateLocales(b.compileType)),0<i.length&&(a=new Error(i.join('\n')))}if(a)throw a.code=p.APP_JSON_CONTENT_ERR,a}if(b.attr&&b.attr.platform){let a=await i(b);if(a)for(let b in a)'extPages'!=b&&(r[b]='object'==e.getType(a[b])?Object.assign({},r[b]||{},a[b]):a[b])}return r}const c=require('path'),d=require('fs'),e=require('./84b183688a46c9e2626d3e6f83365e13.js'),f=require('./libs/jsonlint.js').parser,g=require('./common/locales/index.js'),h=require('babel-code-frame'),i=require('./551bb965e1f344281d555a429cd2140c.js'),j=require('./9fdd4ac31a05c27355910f0d74accd4c.js'),k=require('./162bf2ee28b76d3b3d95b685cede4146.js'),l=require('./2dfc6a3df6d6fc51266b293c8420e88b.js'),m=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),n=require('./6242f55dbdfe53c2f07b7a51568311f2.js').errorPrefix,o=['.png','.jpg','.jpeg'],p=require('./949d8235c744ced2a80121e4dba34c28.js');f.parseError=f.lexer.parseError=function(a,b){throw b},module.exports=async function(a){try{return await b(a)}catch(a){switch(a.code){case p.APP_JSON_READ_ERR:case p.APP_JSON_ENTRANCE_NOT_FOUND_ERR:case p.APP_JSON_PARSE_ERR:case p.APP_JSON_PAGES_ERR:case p.APP_JSON_CONTENT_ERR:{l.display({command:m.DISPLAY_ERROR,type:n.JSON_ERROR,force:!0,data:{title:'app.json \u6587\u4EF6\u9519\u8BEF',msg:a.message}});break}default:l.display({command:m.DISPLAY_ERROR,type:n.JSON_ERROR,force:!0,data:{title:'app.json \u6587\u4EF6\u9519\u8BEF',msg:a.message}});}throw a}}}(require('lazyload'),require);