'use strict';!function(require,directRequire){function a(){nw.Shell.openExternal('https://mp.weixin.qq.com/debug/wxadoc/dev/index.html')}function b(a){const b=global.contentWindow.document.activeElement;'WEBVIEW'===b.tagName?'persist:editor'===b.getAttribute('partition')?c.sendMessage(y,z(a)):b.executeScript({code:`document.execCommand('${a}')`}):global.contentWindow.document.execCommand(a)}const c=require('./ff946754202ecf377034d29daac7c8d9.js'),d=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),e=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),f=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),g=require('./37d8b9297fb1bd87f9a3ac407b8006a0.js'),h=require('./1fcc6bd55b687d154a4247e57fe3011d.js'),i=require('./9c906d27ca74e18d0deaaa231e71fdfa.js'),j=require('./6ff091369f442a4678a2ed4a1f758495.js'),k=require('./a8c87029da0fa06e986298d447ab0fe2.js'),l=require('./cc2c2970ff81ae4a83123e81ee123da2.js'),m=require('./fc137838572a83604db39acff8e909e0.js'),n=require('./e98c60a262d8d98e69e574a9d12a21df.js'),o=require('./ba23d8b47b1f4ea08b9fd49939b9443f.js'),p=require('./db2217eb4cff896bdcbc50abe005058f.js'),q=require('./f171257bbcaef547a3cf27266ccb0db2.js'),r=require('./common/locales/index.js'),s=require('./15ba1827c7f6564a45df6bd44da3a977.js'),t=require('./7762da1c646ee434a13c84e0db9e8308.js'),u=require('./dc59f57d54946e61d27c95ab24d8cb4f.js'),v=require('./eadce02c750c875a10680bcfedadec88.js'),w=d.dispatch.bind(d),x=d.getState.bind(d),y='EDITOR',z=(a)=>JSON.stringify({type:'COMMAND',command:a});module.exports={about:function(){nw.Shell.openExternal('https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/devtools.html')},checkUpdate:async function(){const a=await u.refresh();t.checkNeedUpdate(a)?w(h.showError(r.config.APP_NEED_UPDATE.formateLocales(a.last_ide))):w(h.showConfirmPopup({id:r.config.APP_NEED_NOT_UPDATE,title:r.config.APP_NEED_NOT_UPDATE,showCancel:!1}))},helpAndFeedback:function(){a()},switchAccount:function(){w(i.loginExpired())},inspectApp:function(){chrome.developerPrivate.openDevTools({renderViewId:-1,renderProcessId:-1,extensionId:chrome.runtime.id})},inspectEditor:function(){for(const[a,b]of global.windowMap){const a=b.window.document.querySelector('webview[partition="persist:editor"]');a&&a.showDevTools(!0)}},Doc:a,BBS:async function(a){try{const{resp:b,body:c}=await s({url:q.getBbsTicket,needToken:1});let d=c.open_ticket;d&&(a?nw.Shell.openExternal(`${a}&devcode=${d}`):nw.Shell.openExternal(`https://developers.weixin.qq.com/welogin?devcode=${d}`))}catch(a){nw.Shell.openExternal('https://developers.weixin.qq.com')}},exit:function(){nw.App.quit()},newFile:function(){c.sendMessage(y,z('newFile'))},save:function(){c.sendMessage(y,z('save'))},saveAll:function(){c.sendMessage(y,z('saveAll'))},closeFile:function(){c.sendMessage(y,z('closeFile'))},newProject:function(){const a=x();if(a.window.mainWindow===e.MAIN_WINDOW_TYPE.DEV){const b=p.get(e.WINDOW_REGISTRY.CREATE_PROJECT);b?b.focus():a.window.popup.createProject&&a.window.popup.createProject.show?(w(l.createProjectClose()),w(l.createProjectOpen())):w(l.createProjectOpen())}else if(a.window.mainWindow===e.MAIN_WINDOW_TYPE.SELECT_PROJECT)w(l.createProjectRequest());else;},viewProjects:function(){const a=x();if(a.window.mainWindow===e.MAIN_WINDOW_TYPE.DEV){const b=p.get(e.WINDOW_REGISTRY.SELECT_PROJECT);b?b.focus():a.window.popup.selectProject&&a.window.popup.selectProject.show?(w(l.selectProjectClose()),w(l.selectProjectOpen())):w(l.selectProjectOpen())}else if(a.window.mainWindow===e.MAIN_WINDOW_TYPE.ENTRANCE)w(l.selectProjectRequest());else;},openProject:function(a){const b=x().project.current;if(b&&b.projectid===a)return;let c=a.split('_')[1];c=c&&decodeURIComponent(c)||'',w(h.setConfirmInfo({show:!0,title:r.config.CONFIRM_OPEN_IN_THIS_WINDOW_TITLE,content:r.config.CONFIRM_OPEN_IN_THIS_WINDOW_CONTENT.formateLocales(c),callback:async(b)=>{if(b)try{w(h.setConfirmInfo({show:!1})),w(l.closeProject()),setTimeout(()=>{w(l.openProject(a))},50)}catch(a){}}}))},closeProject:function(){w(l.closeProject())},openAppearanceSettings:function(){w(n.openIDESettings('appearance'))},openEditSettings:function(){w(n.openIDESettings('edit'))},openProxySettings:function(){w(n.openIDESettings('proxy'))},openNotificationSettings:function(){w(n.openIDESettings('notification'))},openProjectSettings:function(){w(m.toggleClickKey(v.PROJECTINFO)),w(h.setProjectInfo({selected:'setting'}))},gotoFile:function(){c.sendMessage(y,z('gotoFile'))},gotoRecentFile:function(){c.sendMessage(y,z('gotoRencentFile'))},gotoPreviousEditor:function(){c.sendMessage(y,z('gotoPreviousEditor'))},gotoNextEditor:function(){c.sendMessage(y,z('gotoNextEditor'))},rebuild:function(){w(o.setAppLaunched(!1))},customRebuild:function(a){w(l.selectCompileCondiction(a)),w(o.setAppLaunched(!1))},openBuildSettings:function(){},toggleForegroundBackgroundStatus:function(){w(o.toggleBackground())},clearFileCache:function(){m.cleanFileCache()(w)},clearAuthCache:function(){m.clearAuth()(w)},clearStorageCache:function(){m.cleanStorageCache()(w)},preview:function(){w(m.togglePreviewCode())},upload:function(){w(h.setUploadInfo({show:!0}))},customAnalysis:function(){w(j.openCustomAnalysis())},autoTest:function(){w(j.openMobileTest())},openProjectDetailInformation:function(){w(m.toggleClickKey(v.PROJECTINFO))},toggleFileTree:function(){c.sendMessage(y,z('toggleFileTree'))},focusDebugWindow:function(){},toggleSimulatorWindow:function(){w(k.toggleSimulatorWindow())},moveSimulatorLeft:function(){w(k.setSimulator({position:'left'}))},moveSimulatorRight:function(){w(k.setSimulator({position:'right'}))},toggleEditorWindow:function(){w(k.toggleEditorWindow())},undo:function(){b('undo')},redo:function(){b('redo')},copy:function(){b('copy')},cut:function(){b('cut')},paste:function(){b('paste')},unindent:function(){c.sendMessage(y,z('unindent'))},indent:function(){c.sendMessage(y,z('indent'))},format:function(){c.sendMessage(y,z('format'))},moveLineUp:function(){c.sendMessage(y,z('moveLinesUp'))},moveLineDown:function(){c.sendMessage(y,z('moveLinesDown'))},copyLineUp:function(){c.sendMessage(y,z('copyLinesUp'))},copyLineDown:function(){c.sendMessage(y,z('copyLinesDown'))},find:function(){c.sendMessage(y,z('find'))},findInFiles:function(){c.sendMessage(y,z('findInFiles'))},replace:function(){c.sendMessage(y,z('replace'))},toggleDebugWindow:function(){w(k.toggleDebugWindow())},createCustomCompile:function(a){w(k.setCustomCompile({show:a}))},switchToMiniProgramDev:function(){x().window.mainWindow===e.MAIN_WINDOW_TYPE.WEB_DEBUGGER&&w(k.setMainWindow(e.MAIN_WINDOW_TYPE.SELECT_PROJECT))},switchToWebDev:function(){x().window.mainWindow===e.MAIN_WINDOW_TYPE.DEV&&(w(l.closeProject()),w(k.setMainWindow(e.MAIN_WINDOW_TYPE.WEB_DEBUGGER)))}}}(require('lazyload'),require);