'use strict';!function(require,directRequire){const a=require('react'),b=require('redux'),c=require('./6620a0cf7dad1b400d60f0fdae40f524.js'),d=require('./a8c87029da0fa06e986298d447ab0fe2.js'),e=require('./0794878a22a26634e42df858bbaca543.js'),f=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),{connect:g}=require('react-redux'),h='darwin'===process.platform;class i extends a.Component{constructor(a){super(a)}componentDidMount(){let a=this.props.win;if(a.title='\u4E0A\u4F20\u817E\u8BAF\u4E91',a.show(),this.props.uploading.estimateTime){let b=1e3*this.props.uploading.estimateTime,c=Date.now();a.setProgressBar(0.01),this.timer=setInterval(()=>{let d=(Date.now()-c)/b;1<=d&&(d=1,clearInterval(this.timer)),a.setProgressBar(d)},5e3)}else{let b=0;this.timer=setInterval(()=>{b+=1e-3,a.setProgressBar(b),1<b&&(b=0.99,clearInterval(this.timer))},100)}}componentWillUnmount(){clearInterval(this.timer),this.props.close()}onClick(){this.props.uploading.status===f.QCLOUD_UPLOADING_STATUS.UPLOADING?this.props.win.minimize():this.props.close()}render(){let b='',c='',d='',e=this.props.win;this.props.uploading.status===f.QCLOUD_UPLOADING_STATUS.UPLOADING?(b='\u6700\u5C0F\u5316',d='\u4E0A\u4F20\u4E2D\uFF0C\u8BF7\u7A0D\u7B49....',c=this.props.uploading.text,this.props.uploading.estimateTime&&(clearInterval(this.timer),this.componentDidMount())):(clearInterval(this.timer),b='\u786E\u5B9A',this.props.uploading.status===f.QCLOUD_UPLOADING_STATUS.FAIL?(d='\u4E0A\u4F20\u51FA\u73B0\u9519\u8BEF',c=this.props.uploading.text):(d='\u4E0A\u4F20\u6210\u529F',c=''),e.setProgressBar(1),h?(e.setProgressBar(0),e.restore()):e.requestAttention(!0));const g=c?{}:{display:'none'},i=c?{display:'none'}:{};return a.createElement('div',{className:'container',style:{WebkitAppRegion:'drag'}},a.createElement('div',null,a.createElement('div',{className:'modal'},a.createElement('div',{className:'modal-hd'}),a.createElement('div',{className:'modal-bd'},a.createElement('div',{className:'ui-msg'},a.createElement('div',{className:'ui-msg-icon'},a.createElement('i',{className:'ui-icon-qcloud-colorful'})),a.createElement('div',{className:'ui-msg-content'},a.createElement('h4',null,decodeURIComponent(d)),a.createElement('p',{style:g},decodeURIComponent(c)),a.createElement('div',{className:'ui-progress',style:i}))),a.createElement('div',{className:'ui-msg-action'},a.createElement('button',{className:'ui-button ui-button-primary',style:{WebkitAppRegion:'no-drag'},onClick:this.onClick.bind(this)},b))))))}}const j=g((a)=>{return{uploading:a.window.qcloud.uploading}},(a)=>{return{close:()=>{a(d.setQCloud({uploading:{show:!1}}))}}})(i);module.exports=class extends a.Component{constructor(a){super(a)}render(){return a.createElement(c,{title:' ',frame:!1,show:!1,width:f.SIZE.QCLOUD_UPLOADING.WIDTH,height:f.SIZE.QCLOUD_UPLOADING.HEIGHT,resizable:!1,fullscreen:!1,always_on_top:!1,templateHTML:'html/qcloudModal.html',renderClass:j})}}}(require('lazyload'),require);